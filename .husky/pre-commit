#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."
echo ""

# 1. Format check
echo "ğŸ“ Checking code formatting..."
npm run format:check || {
  echo "âŒ Format check failed. Run 'npm run format' to fix."
  exit 1
}
echo "âœ… Format check passed"
echo ""

# 2. Linting
echo "ğŸ”§ Running linters..."
npm run lint || {
  echo "âŒ Linting failed. Fix errors and try again."
  exit 1
}
echo "âœ… Linting passed"
echo ""

# 3. Security check
echo "ğŸ”’ Running security checks..."
npm run security:check || {
  echo "âš ï¸  Security warnings found. Review before committing."
}
echo "âœ… Security check completed"
echo ""

# 4. Unit tests
echo "ğŸ§ª Running tests..."
npm test || {
  echo "âŒ Tests failed. Fix tests before committing."
  exit 1
}
echo "âœ… Tests passed"
echo ""

echo "âœ¨ All pre-commit checks passed!"
echo "âœ¨ Ready to commit!"
